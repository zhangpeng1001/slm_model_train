# BERT-base-chinese 模型测试工具

这是一个用于测试 BERT-base-chinese 模型基础能力的交互式测试工具。

## 文件说明

- `bert-base-chinese.py` - 主要的测试程序，包含完整的交互式测试功能
- `test_bert.py` - 基础功能验证脚本，用于快速检查模型是否正常工作
- `README.md` - 本说明文档

## 功能特性

### 1. 文本相似度计算
- 计算两个中文文本之间的语义相似度
- 使用余弦相似度算法
- 返回0-1之间的相似度分数

### 2. 掩码词预测 (MLM)
- 预测文本中 `[MASK]` 位置的词汇
- 返回概率最高的前5个预测结果
- 支持任意位置的掩码预测

### 3. 文本分词测试
- 展示BERT分词器的分词结果
- 显示词汇编码和解码过程
- 帮助理解模型的文本处理方式

### 4. 词向量获取
- 获取文本的768维向量表示
- 使用[CLS]标记作为句子级别的表示
- 可用于下游任务的特征提取

## 使用方法

### 方法1: 运行交互式测试程序

```bash
python src/base-model-test/bert-base-chinese.py
```

### 方法2: 先运行基础功能验证

```bash
python src/base-model-test/test_bert.py
```

## 测试样例

### 文本相似度测试样例
```
文本1: "今天天气很好"
文本2: "今天的天气非常不错"
预期: 高相似度 (0.8+)

文本1: "我喜欢吃苹果" 
文本2: "苹果是我最爱的水果"
预期: 中等相似度 (0.6-0.8)
```

### 掩码词预测测试样例
```
输入: "今天天气很[MASK]"
预期预测: 好、棒、不错、晴朗、热

输入: "北京是中国的[MASK]"
预期预测: 首都、都城、京城、中心

输入: "程序员需要学习[MASK]语言"
预期预测: 编程、计算机、程序设计、开发
```

### 文本分词测试样例
```
输入: "我爱北京天安门"
预期分词: ['我', '爱', '北', '京', '天', '安', '门']

输入: "人工智能技术发展迅速"
预期分词: ['人', '工', '智', '能', '技', '术', '发', '展', '迅', '速']
```

## 交互式测试菜单

程序运行后会显示以下菜单选项：

```
请选择测试功能:
1. 文本相似度计算
2. 掩码词预测
3. 文本分词测试
4. 词向量获取
5. 使用测试样例
0. 退出
```

### 选项说明

- **选项1**: 手动输入两个文本，计算相似度
- **选项2**: 输入包含[MASK]的文本，预测掩码词
- **选项3**: 输入文本，查看分词结果
- **选项4**: 输入文本，获取词向量信息
- **选项5**: 使用预设的测试样例进行批量测试
- **选项0**: 退出程序

## 环境要求

### Python依赖包
```
torch
transformers
numpy
scikit-learn
```

### 安装依赖
```bash
pip install torch transformers numpy scikit-learn
```

## 模型路径配置

默认模型路径为:
```
E:\project\llm\model-data\base-models\models--bert-base-chinese\snapshots\8f23c25b06e129b6c986331a13d8d025a92cf0ea
```

如果您的模型路径不同，请修改 `bert-base-chinese.py` 文件中的 `bert_model_path` 变量。

## 故障排除

### 1. 模型路径不存在
- 检查模型文件是否已下载
- 确认路径是否正确
- 可以从 Hugging Face 下载 bert-base-chinese 模型

### 2. 依赖包缺失
```bash
pip install -r requirements.txt
```

### 3. 内存不足
- BERT模型需要较大内存
- 建议至少4GB可用内存
- 可以考虑使用CPU版本的PyTorch

### 4. CUDA相关错误
- 如果没有GPU，模型会自动使用CPU
- 确保PyTorch版本与CUDA版本兼容

## 性能说明

- **模型加载时间**: 首次加载约10-30秒
- **推理速度**: 单次预测约0.1-1秒
- **内存占用**: 约1-2GB
- **支持批处理**: 可以处理多个文本

## 扩展功能

可以基于此工具扩展以下功能:

1. **批量文本处理**: 从文件读取文本进行批量测试
2. **结果导出**: 将测试结果保存到文件
3. **性能评估**: 添加准确率、召回率等指标
4. **可视化**: 使用matplotlib展示相似度分布
5. **API接口**: 封装为Web API服务

## 联系信息

如有问题或建议，请联系开发者。
